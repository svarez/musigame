(this.webpackJsonpmusigame=this.webpackJsonpmusigame||[]).push([[0],{34:function(t,e,n){},35:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(20),c=n.n(a),s=n(9),i=n(11),u=n(2),o=n(14),l=n(3),d=n.n(l),m=n(8),b=void 0,f=function(){var t=Object(m.a)(d.a.mark((function t(e){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).catch((function(t){t.text().then((function(t){b.props.dispatch(console.log(t))}))}));case 2:return n=t.sent,t.next=5,n.json().catch((function(t){t.text().then((function(t){b.props.dispatch(console.log(t))}))}));case 5:if((r=t.sent).error){t.next=8;break}return t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h={apiKey:"b26dd5a2d87242721a4a79f50599062d",baseUrlApi:"https://ws.audioscrobbler.com/2.0/",methodArtistSearch:"artist.search",methodGetSimilarArtist:"artist.getsimilar",methodGetTopAlbums:"artist.gettopalbums",methodGetInfoAlbum:"album.getinfo",limit:10,urlArtistSearch:function(t){return"".concat(this.baseUrlApi,"?method=").concat(this.methodArtistSearch,"&api_key=").concat(this.apiKey,"&artist=").concat(j(t),"&format=json")},urlGetSimilarArtist:function(t){return"".concat(this.baseUrlApi,"?method=").concat(this.methodGetSimilarArtist,"&api_key=").concat(this.apiKey,"&artist=").concat(j(t),"&limit=").concat(this.limit,"&format=json")},urlGetTopAlbums:function(t){return"".concat(this.baseUrlApi,"?method=").concat(this.methodGetTopAlbums,"&api_key=").concat(this.apiKey,"&mbid=").concat(t,"&limit=").concat(this.limit,"&format=json")},urlGetTopAlbumsByName:function(t){return"".concat(this.baseUrlApi,"?method=").concat(this.methodGetTopAlbums,"&api_key=").concat(this.apiKey,"&artist=").concat(j(t),"&limit=").concat(this.limit,"&format=json")},urlGetInfoAlbum:function(t){return"".concat(this.baseUrlApi,"?method=").concat(this.methodGetInfoAlbum,"&api_key=").concat(this.apiKey,"&mbid=").concat(t,"&format=json")},urlGetInfoAlbumByName:function(t,e){return"".concat(this.baseUrlApi,"?method=").concat(this.methodGetInfoAlbum,"&api_key=").concat(this.apiKey,"&album=").concat(j(t),"&artist=").concat(j(e),"&format=json")}},j=function(t){return encodeURI(t.normalize("NFD").replace(/[\u00C0-\u00FF]/g,"").toLowerCase())},p=function(t){return f(h.urlGetSimilarArtist(t))},v=function(t){return f(h.urlGetTopAlbums(t))},x=function(t){return f(h.urlGetTopAlbumsByName(t))},O=function(t){return f(h.urlGetInfoAlbum(t))},w=function(t,e){return f(h.urlGetInfoAlbumByName(t,e))},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=new Array(e),r=t.length,a=new Array(r);if(e>r)return[];for(;e--;){var c=Math.floor(Math.random()*r);n[e]=t[c in a?a[c]:c],a[c]=--r in a?a[r]:r}return n},k=function(t){var e=(new Date).getFullYear(),n=Math.min(t+5,e)-10;return new Array(10).fill().map((function(t,e){return n+e})).filter((function(e){return e!==t})).map(String)},y=function(){var t=Object(m.a)(d.a.mark((function t(e){var n,r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c=e,f(h.urlArtistSearch(c));case 2:return r=t.sent,a=r.results,t.abrupt("return",null===a||void 0===a||null===(n=a.artistmatches)||void 0===n?void 0:n.artist);case 5:case"end":return t.stop()}var c}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(t){return _(t).then((function(t){return t}))},_=function(t){switch(Math.floor(3*Math.random())){case 0:return N(t);case 1:return S(t);case 2:return G(t);case 3:return I(t);default:return N(t)}},N=function(){var t=Object(m.a)(d.a.mark((function t(e){var n,r,a,c,s,i,u,l,m,b,f,h;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:if(!(a=t.sent).mbid){t.next=9;break}return t.next=6,O(a.mbid);case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,w(a.name,a.artist.name);case 11:t.t0=t.sent;case 12:if(!(null===(c=t.t0)||void 0===c||null===(n=c.album)||void 0===n?void 0:n.wiki)||!C(null===c||void 0===c||null===(r=c.album)||void 0===r?void 0:r.wiki)){t.next=25;break}return s=c.album,i=C(s.wiki),u=parseInt(i).toString(),l=k(parseInt(u)),m="What year was release the album ".concat(a.name," by ").concat(a.artist.name,"?"),b=[].concat(Object(o.a)(A(l,3)),[u]).sort((function(){return Math.random()-.5})),f=Object.keys(b).find((function(t){return b[t]===u})),h={title:m,answers:b,correctAnswer:f},t.abrupt("return",h);case 25:return t.abrupt("return",G(e));case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=Object(m.a)(d.a.mark((function t(e){var n,r,a,c,s,i,u,l,m;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:return n=t.sent,r=n.artist.name,t.next=6,p(r);case 6:return a=t.sent,c=a.similarartists.artist,s=A(c,3).map((function(t){return t.name})),i="Who recorded the album ".concat(n.name,"?"),u=[].concat(Object(o.a)(A(s,3)),[r]).sort((function(){return Math.random()-.5})),l=Object.keys(u).find((function(t){return u[t]===r})),m={title:i,answers:u,correctAnswer:l},t.abrupt("return",m);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),G=function(){var t=Object(m.a)(d.a.mark((function t(e){var n,r,a,c,s,i,u,l,m,b,f,h,j,v,x,k,y,g,_,N,G,I;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:if(c=t.sent,s=c.artist.name,!c.mbid){t.next=10;break}return t.next=7,O(c.mbid);case 7:t.t0=t.sent,t.next=13;break;case 10:return t.next=12,w(c.name,c.artist.name);case 12:t.t0=t.sent;case 13:if(!((null===(i=t.t0)||void 0===i||null===(n=i.album)||void 0===n||null===(r=n.tracks)||void 0===r||null===(a=r.track)||void 0===a?void 0:a.length)>0)){t.next=48;break}return b=i.album.tracks,f=A(b.track,3).map((function(t){return t.name})),t.next=19,p(s);case 19:return h=t.sent,j=h.similarartists.artist,v=A(j,1)[0],t.next=24,M(v);case 24:if(!(x=t.sent).mbid){t.next=31;break}return t.next=28,O(x.mbid);case 28:t.t1=t.sent,t.next=34;break;case 31:return t.next=33,w(x.name,x.artist.name);case 33:t.t1=t.sent;case 34:if(!((null===(k=t.t1)||void 0===k||null===(u=k.album)||void 0===u||null===(l=u.tracks)||void 0===l||null===(m=l.track)||void 0===m?void 0:m.length)>0)){t.next=45;break}return y=k.album,g=A(y.tracks.track,1)[0].name,_="Which of these songs wasn't recorded by ".concat(s,"?"),N=[].concat(Object(o.a)(A(f,3)),[g]).sort((function(){return Math.random()-.5})),G=Object.keys(N).find((function(t){return N[t]===g})),I={title:_,answers:N,correctAnswer:G},t.abrupt("return",I);case 45:return t.abrupt("return",S(e));case 46:t.next=49;break;case 48:return t.abrupt("return",S(e));case 49:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=Object(m.a)(d.a.mark((function t(e){var n,r,a,c,s,i,u,l,m,b,f,h,j,v;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e,3);case 2:if(a=t.sent,!(null===(n=a[0])||void 0===n||null===(r=n.artist)||void 0===r?void 0:r.name)){t.next=26;break}return c=a[0].artist.name,s=a.map((function(t){return t.name})),t.next=8,p(c);case 8:return i=t.sent,u=i.similarartists.artist,l=A(u,1)[0],t.next=13,M(l);case 13:if(!(m=t.sent)){t.next=23;break}return b=m.name,f="Which of these albums wasn't recorded by ".concat(c,"?"),h=[].concat(Object(o.a)(s),[b]).sort((function(){return Math.random()-.5})),j=Object.keys(h).find((function(t){return h[t]===b})),v={title:f,answers:h,correctAnswer:j},t.abrupt("return",v);case 23:return t.abrupt("return",S(e));case 24:t.next=27;break;case 26:return t.abrupt("return",S(e));case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(t){var e="",n=/(\d\d\d\d)/,r=t.content.match("released")?t.content.split("released"):null;return r&&r[1]&&r[1].match(n)&&(e=r[1].match(n)[0]),e},M=function(){var t=Object(m.a)(d.a.mark((function t(e){var n,r,a,c,s,i,u,o,l=arguments;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:1,!(null===e||void 0===e?void 0:e.name)){t.next=20;break}if(c=e.mbid,s=e.name,!c){t.next=9;break}return t.next=6,v(c);case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,x(s);case 11:t.t0=t.sent;case 12:if(!((null===(i=t.t0)||void 0===i||null===(r=i.topalbums)||void 0===r||null===(a=r.album)||void 0===a?void 0:a.length)>0)){t.next=19;break}return u=i.topalbums.album,o=u.filter((function(t){var e=t.name;return!e.includes("Essential")&&!e.includes("Best")&&!e.includes("Anniversary")&&!e.includes("Collection")&&!e.includes("Hits")&&!e.includes("Greatest")&&!e.includes("Deluxe")&&!e.includes("null")&&!e.includes("Number Ones")&&!e.includes("Anthology")&&!e.includes("Singles")&&!e.includes("History")&&!e.includes("Remaster")&&!e.includes("Mix")})),t.abrupt("return",1===n?A(o,1)[0]:A(o,n));case 19:return t.abrupt("return",S(e));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=Object(r.createContext)(null),q=n(1),T=function(){var t=Object(r.useContext)(F),e=t.favArtist,n=t.setFavArtist,a=t.setSelectedArtist,c=Object(u.g)(),i=Object(r.useState)(""),o=Object(s.a)(i,2),l=o[0],d=o[1],m=!e;return Object(q.jsxs)("div",{className:"intro",children:[Object(q.jsxs)("div",{className:"description",children:[Object(q.jsx)("h1",{children:"Automatic quiz generator"}),Object(q.jsx)("p",{children:"In order for us to generate the quiz you must enter the name of your favorite band/artist:"})]}),Object(q.jsxs)("div",{className:"form",children:[Object(q.jsxs)("form",{children:[Object(q.jsxs)("div",{className:"form__field",children:[Object(q.jsx)("input",{type:"text",className:"form__field__input",autoComplete:"off",placeholder:"Your favorite film",name:"favFilm",id:"favFilm",required:!0,value:e,onChange:function(t){n(t.target.value),d("")}}),Object(q.jsx)("label",{htmlFor:"favFilm",className:"form__field__label",children:"Your favorite band/artist"})]}),Object(q.jsx)("button",{className:"form__button",disabled:m,onClick:function(t){t.preventDefault(),y(e).then((function(t){if(t.length>0){var n=t.reduce((function(t,e){return parseInt(t.listeners)>parseInt(e.listeners)?t:e}));a(n),c.replace("/quiz")}else d("We couldn't find any title with the name of ".concat(e))}))},children:"Send"})]}),l&&Object(q.jsx)("div",{className:"error-text",children:l})]})]})},U=function(){var t=Object(m.a)(d.a.mark((function t(e){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(e);case 2:return n=t.sent,r=n.similarartists.artist,t.abrupt("return",A(r,1)[0]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=function(t){return{width:t+"%"}},z=function(t){var e=t.correctAnswers,n=t.totalAnswers,r=n<100?e:Math.round(100*e/n),a=n<100?n-e:100-r;return Object(q.jsxs)("div",{className:"statics",children:[Object(q.jsxs)("h3",{children:["Correct answers :",Object(q.jsxs)("span",{className:"statics__correct-answers",children:[" ",e]}),Object(q.jsxs)("span",{className:"statics__total-answers",children:[" / ",n]})]}),Object(q.jsxs)("div",{className:"percent",children:[Object(q.jsx)("div",{style:K(r),className:"percent__correct"}),Object(q.jsx)("div",{style:K(a),className:"percent__wrong"})]})]})},B=function(){var t=Object(r.useState)(0),e=Object(s.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)(0),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(r.useContext)(F).selectedArtist,m=Object(r.useRef)([]),b=Object(u.g)();!d&&b.replace("./intro");var f=Object(r.useState)({title:"",answers:[],correctAnswer:"",loading:!0}),h=Object(s.a)(f,2),j=h[0],p=h[1];Object(r.useEffect)((function(){d&&g(d).then((function(t){p(t)}))}),[d]);var v=function(t){l(o+1),j.correctAnswer===t.target.value?(a(n+1),m.current[t.target.value].classList.add("correct-answer")):(m.current[j.correctAnswer].classList.add("correct-answer"),m.current[t.target.value].classList.add("wrong-answer")),setTimeout((function(){p({title:"",answers:[],correctAnswer:"",loading:!0}),U(d.name).then((function(t){g(t).then((function(t){p(t)}))}))}),1500)};return Object(q.jsx)("div",{className:"quiz",children:Object(q.jsxs)("div",{className:"question",children:[Object(q.jsx)("div",{className:"fav-movie",children:Object(q.jsxs)("h2",{children:["You chose ",d.name]})}),Object(q.jsx)(z,{correctAnswers:n,totalAnswers:o}),Object(q.jsx)("div",{className:"question__title",children:Object(q.jsx)("h1",{children:j.title})}),Object(q.jsx)("div",{className:"question__answers",children:Object.keys(j.answers).map((function(t){return Object(q.jsxs)("label",{ref:function(e){return m.current[t]=e},className:"radio radio-gradient",children:[Object(q.jsxs)("span",{className:"radio__input",children:[Object(q.jsx)("input",{name:"answer",type:"radio",value:t,onChange:v}),Object(q.jsx)("span",{className:"radio__control"})]}),Object(q.jsx)("span",{className:"radio__label",children:j.answers[t]})]},j.answers[t])}))}),j.loading&&Object(q.jsx)("div",{children:"Loading..."})]})})},L=function(){return Object(q.jsx)("div",{className:"header",children:Object(q.jsx)(i.b,{to:"./",children:Object(q.jsx)("h2",{children:"musigame."})})})},W=function(){return Object(q.jsx)(i.a,{basename:"/",children:Object(q.jsxs)("div",{className:"app-container",children:[Object(q.jsx)(L,{}),Object(q.jsx)("div",{className:"main-container",children:Object(q.jsxs)(u.d,{children:[Object(q.jsx)(u.b,{exact:!0,path:"/intro",component:T}),Object(q.jsx)(u.b,{exact:!0,path:"/quiz",component:B}),Object(q.jsx)(u.a,{to:"/intro"})]})})]})})},D=function(){var t=Object(r.useState)(""),e=Object(s.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)(""),i=Object(s.a)(c,2),u=i[0],o=i[1];return Object(q.jsx)(F.Provider,{value:{favArtist:n,setFavArtist:a,selectedArtist:u,setSelectedArtist:o},children:Object(q.jsx)(W,{})})};n(34);c.a.render(Object(q.jsx)(D,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.af8fa605.chunk.js.map